---
title: "ã€Flutterã€‘intl_phone_fieldã‚’ä½¿ã£ã¦å›½éš›åŒ–ã«å¯¾å¿œã—ãŸé›»è©±ç•ªå·å…¥åŠ›ã®ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ä½œæˆã™ã‚‹"
emoji: "ğŸ“"
type: "tech"
topics: [Flutter,Dart,Tech]
published: true
---

# æ¦‚è¦
è¤‡æ•°ã®å›½ã‹ã‚‰åˆ©ç”¨ã•ã‚Œã‚‹ã“ã¨ã‚’æƒ³å®šã—ã¦é›»è©±ç•ªå·å…¥åŠ›ã®ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ä½œæˆã—ãŸéš›ã«ã€ã‚¢ãƒ—ãƒªå´ã§å›½ç•ªå·ã‚’å®šç¾©ã—ã¦ãŠã„ãŸã‚Šã€å›½é¸æŠã®ã‚»ãƒ¬ã‚¯ãƒˆãƒœãƒƒã‚¯ã‚¹ã‚’ä½œã‚‹ã®ãŒå°‘ã—é¢å€’ã ã£ãŸãŸã‚ [intl_phone_field](https://pub.dev/packages/intl_phone_field) ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã£ã¦å®Ÿè£…ã‚’ã—ãŸã®ã§ã™ãŒã€intl_phone_fieldã‚’ä½¿ç”¨ã—ãŸæ—¥æœ¬èªã®è¨˜äº‹ãŒè¦‹ã¤ã‹ã‚‰ãªã‹ã£ãŸã®ã§å‚™å¿˜éŒ²ã¨ã—ã¦ä»Šå›è¨˜äº‹ã«æ®‹ã—ã¾ã—ãŸã€‚

# intl_phone_fieldã¨ã¯
https://pub.dev/packages/intl_phone_field

å›½éš›é›»è©±ç•ªå·ã¨å›½ç•ªå·ã‚’å…¥åŠ›ã™ã‚‹ãŸã‚ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã•ã‚ŒãŸTextFormFieldã‚’æä¾›ã—ã¦ãã‚Œã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã™ã€‚

![](/images/articles/intl_phone_field_sample.gif)

# ä½¿ã„æ–¹
## pubspec.yamlã«è¿½è¨˜
```diff yaml
dependencies:
+ intl_phone_field: ^3.1.0
```

## IntlPhoneFieldã‚’å®šç¾©ã™ã‚‹
```dart
IntlPhoneField(
  decoration: const InputDecoration( // TextFieldã®è¦‹ãŸç›®ã‚’æ•´ãˆã‚‹
    labelText: 'Phone Number',
    border: OutlineInputBorder(
        borderSide: BorderSide(),
    ),
  ),
  initialCountryCode: 'JP', // æœ€åˆã«è¡¨ç¤ºã™ã‚‹å›½ã‚’æŒ‡å®š
  onCountryChanged: (country) { //ã€€å›½ã‚’å¤‰æ›´ã—ãŸã¨ãã«ç™ºç«
    print(country)
  }

  onChanged: (phone) { // ç•ªå·ã®å…¥åŠ›ãƒ»å‰Šé™¤ã§ç™ºç«
    print(phone);
  },
  
  // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¨­å®š
  // æŒ‡å®šã—ãªã‹ã£ãŸå ´åˆã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯'Invalid Mobile Number'ãŒè¡¨ç¤ºã•ã‚Œã‚‹
  invalidNumberMessage: 'æ­£ã—ã„é›»è©±ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„',
)
```
ä»–ã«ã‚‚è‰²ã€…ãªãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒæŒ‡å®šã§ãã‚‹ãŸã‚ã€è‰²ã€…ãªã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãŒã§ããã†ã§ã—ãŸï¼
onCountryChangedã¨onChangedã§å–å¾—ã§ãã‚‹ãƒ‡ãƒ¼ã‚¿ã¯ä¸‹è¨˜ã«ãªã‚Šã¾ã™ã€‚

* onCountryChangedã§å–å¾—ã§ãã‚‹ãƒ‡ãƒ¼ã‚¿
```dart
Country(
  name: 'Japan',  // å›½å
  flag: 'ğŸ‡¯ğŸ‡µ',     // å›½æ——ã‚¢ã‚¤ã‚³ãƒ³
  code: 'JP',     // å›½åã‚³ãƒ¼ãƒ‰
  dialCode: '81', // ãƒ€ã‚¤ã‚¢ãƒ«ã‚³ãƒ¼ãƒ‰
  minLength: 10,  // æœ€å°æ¡æ•°
  maxLength: 10,  // æœ€å¤§æ¡æ•°
);
```

* onChangedã§å–å¾—ã§ãã‚‹ãƒ‡ãƒ¼ã‚¿
```dart
PhoneNumber(
  countryISOCode: 'JP',           // ISOå›½åã‚³ãƒ¼ãƒ‰
  countryCode: '+81',             // å›½ç•ªå·
  number: '9012345678',           // å®Ÿéš›ã«å…¥åŠ›ã—ãŸç•ªå·
  completeNumber: '+819012345678' // å›½ç•ªå· + å…¥åŠ›ã—ãŸç•ªå·
);
```

# ã€Œå›½ç•ªå· + é›»è©±ç•ªå·ã€ã§å–å¾—ã™ã‚‹æ–¹æ³•
ã€Œå›½ç•ªå· + ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®é›»è©±ç•ªå·ã€ã‚’å–å¾—ã—ãŸã„å ´åˆã«ã€TextEditingControllerã§å®šç¾©ã—ãŸcontrollerã‹ã‚‰ã¯å–å¾—ã§ããªã„ãŸã‚ã€æš«å®šçš„ã«ä¸‹è¨˜æ–¹æ³•ã§å¯¾å¿œã—ã¾ã—ãŸã€‚

* onChangedã§å…¥åŠ›ãŒã‚ã‚‹åº¦ã«completeNumberã‚’Stateã¨ã—ã¦ä¿æŒã—ã¦ãŠã

ã¾ãŸã¯

* onCountryChangedã§å›½ã‚’å¤‰æ›´ã™ã‚‹åº¦ã«Stateã¨ã—ã¦å›½ç•ªå·ã‚’ä¿æŒã—ã€
é€ä¿¡ãƒœã‚¿ãƒ³æŠ¼ä¸‹æ™‚ã®å‡¦ç†ã§ã€ŒStateã¨ã—ã¦ä¿æŒã—ã¦ã„ã‚‹å›½ç•ªå· + å…¥åŠ›å€¤ã€ã‚’ä½œæˆã™ã‚‹

# ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¦ã¿ã‚‹
ç°¡å˜ãªã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã¨ã—ã¦æ—¥æœ¬ã‚’é¸æŠã—ãŸå ´åˆã®ã¿ã€labelTextã¨invalidNumberMessageãŒæ—¥æœ¬èªã§è¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚

1. initialCountryCodeã«ã€ŒJPã€ã‚’æŒ‡å®šã™ã‚‹
2. é¸æŠä¸­ã®å›½ã‚’ä¿æŒã™ã‚‹Stateã‚’å®šç¾©ã™ã‚‹
  ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã«ã¯ã€ŒJapanã€ã‚’æŒ‡å®šã—ã¦ãŠã
3. onCountryChangedå†…ã§å›½ãŒå¤‰æ›´ã•ã‚Œã‚‹åº¦ã«Stateã‚’å¤‰æ›´ã™ã‚‹
4. labelTextã¨invalidNumberMessageã«æ–‡è¨€ã‚’è¨­å®šã™ã‚‹

```diff dart
class HomePage extends StatefulWidget {
  const HomePage({Key? key}) : super(key: key);
  @override
  State<HomePage> createState() => _HomePageState();
}

class _HomePageState extends State<HomePage> {
  // 2
+ String selectedCountryName = 'Japan';

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('é›»è©±ç•ªå·å…¥åŠ›'),
      ),
      body: IntlPhoneField(
        decoration: InputDecoration(

          // 4
+         labelText:
+             selectedCountryName == 'Japan' ? 'é›»è©±ç•ªå·' : 'Phone Number',
          border: const OutlineInputBorder(
            borderSide: BorderSide(),
          ),
        ),
        onCountryChanged: (country) {
          // 3
          setState(() {
            selectedCountryName = country.name;
          });
        },
        
        // 1
+       initialCountryCode: 'JP',

        // 4
+       invalidNumberMessage: selectedCountryName == 'JP'
+           ? 'æ­£ã—ã„é›»è©±ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'
+           : 'Invalid Mobile Number',
      ),
    );
  }
}
```
![](/images/articles/intl_phone_field_customize.gif)

# æœ€å¾Œã«
ä¼¼ãŸã‚ˆã†ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§[extended_phone_number_input](https://pub.dev/packages/extended_phone_number_input)ã¨ã„ã†ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚‚ã‚ã‚Šã€ã“ã¡ã‚‰ã‚‚æ§˜ã€…ãªã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãŒã§ããã†ã§ã—ãŸï¼
LIKEæ•°ãŒå¤šã‹ã£ãŸãŸã‚ä»Šå›ã¯intl_phone_fieldã‚’ä½¿ç”¨ã—ã¾ã—ãŸãŒã€IntlPhoneFieldã‚’å‘¼ã¶ã ã‘ã§ã¨ã¦ã‚‚ç°¡å˜ã«å®Ÿè£…ãŒã§ãã¾ã—ãŸã®ã§é›»è©±ç•ªå·å…¥åŠ›ã®ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ä½œæˆã™ã‚‹éš›ã«ã¯ãœã²å‚è€ƒã«ã—ã¦ã¿ã¦ãã ã•ã„ï¼